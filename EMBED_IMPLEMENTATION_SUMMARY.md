# æ™ºèƒ½ä½“åµŒå…¥åŠŸèƒ½å®ç°æ€»ç»“

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

å·²æˆåŠŸå®ç°æ™ºèƒ½ä½“åµŒå…¥åŠŸèƒ½,å…è®¸ç”¨æˆ·å°†æ™ºèƒ½ä½“éƒ¨ç½²åˆ°ä»»ä½•ç½‘ç«™,é€šè¿‡ JavaScript SDK æä¾› AI èŠå¤©åŠ©æ‰‹ã€‚

## ğŸ¯ å·²å®Œæˆçš„åŠŸèƒ½

### 1. åç«¯ API å®ç°

#### åˆ›å»ºçš„æ–‡ä»¶:
- `backend/src/api/embed.ts` - åµŒå…¥ç›¸å…³çš„ API è·¯ç”±
- `backend/src/api/index.ts` - æ›´æ–°äº† API è·¯ç”±æ³¨å†Œ
- `backend/src/api/agents.ts` - æ·»åŠ äº†åˆ†äº«ä»¤ç‰Œç”Ÿæˆ/æ’¤é”€åŠŸèƒ½

#### API ç«¯ç‚¹:
- `GET /api/v1/embed/agent/:shareToken` - è·å–å…¬å¼€æ™ºèƒ½ä½“é…ç½®
- `POST /api/v1/embed/conversations` - åˆ›å»ºåµŒå…¥å¯¹è¯
- `POST /api/v1/embed/conversations/:conversationId/messages` - å‘é€æ¶ˆæ¯
- `GET /api/v1/embed/conversations/:conversationId/messages` - è·å–æ¶ˆæ¯å†å²
- `POST /api/v1/agents/:id/share-token` - ç”Ÿæˆåˆ†äº«ä»¤ç‰Œ
- `DELETE /api/v1/agents/:id/share-token` - æ’¤é”€åˆ†äº«ä»¤ç‰Œ

### 2. JavaScript Embed SDK

#### åˆ›å»ºçš„æ–‡ä»¶:
- `backend/public/embed.js` - å®Œæ•´çš„åµŒå…¥ SDK (çº¦ 600 è¡Œä»£ç )

#### SDK åŠŸèƒ½:
- âœ… æ”¯æŒå¤šç§ä½ç½®é…ç½® (bottom-right, bottom-left, top-right, top-left)
- âœ… æ”¯æŒäº®è‰²/æš—è‰²ä¸»é¢˜
- âœ… å¯è‡ªå®šä¹‰å°ºå¯¸ã€é¢œè‰²ã€æ ‡é¢˜
- âœ… å¯è®¾ç½®æ¬¢è¿æ¶ˆæ¯
- âœ… æ”¯æŒå¤´åƒæ˜¾ç¤º
- âœ… å“åº”å¼è®¾è®¡
- âœ… æ¶ˆæ¯å†å²ç®¡ç†
- âœ… ç¼–ç¨‹æ¥å£ (open, close, toggle, updateConfig, destroy)

### 3. å‰ç«¯ç»„ä»¶

#### åˆ›å»ºçš„æ–‡ä»¶:
- `frontend/src/components/agents/EmbedCode.tsx` - åµŒå…¥ä»£ç ç”Ÿæˆå’Œé…ç½®ç»„ä»¶
- `frontend/src/lib/api/agents.ts` - æ·»åŠ äº†åˆ†äº«ä»¤ç‰Œç›¸å…³çš„ API æ–¹æ³•
- `frontend/src/app/dashboard/agents/[id]/page.tsx` - é›†æˆäº†åµŒå…¥ä»£ç ç»„ä»¶

#### ç»„ä»¶åŠŸèƒ½:
- ğŸ¨ å¯è§†åŒ–é…ç½®ç•Œé¢
- ğŸ“‹ ä¸€é”®å¤åˆ¶åµŒå…¥ä»£ç 
- ğŸ¯ å®æ—¶é¢„è§ˆé…ç½®æ•ˆæœ
- ğŸ”— åˆ†äº«ä»¤ç‰Œç®¡ç†

### 4. ç¤ºä¾‹å’Œæ–‡æ¡£

#### åˆ›å»ºçš„æ–‡ä»¶:
- `backend/public/embed-example.html` - å®Œæ•´çš„åµŒå…¥ç¤ºä¾‹é¡µé¢
- `EMBED_GUIDE.md` - è¯¦ç»†çš„ä½¿ç”¨æŒ‡å—
- `CHANGELOG.md` - æ›´æ–°æ—¥å¿—
- `EMBED_IMPLEMENTATION_SUMMARY.md` - æœ¬æ–‡æ¡£

#### æ–‡æ¡£å†…å®¹:
- ğŸ“š å¿«é€Ÿå¼€å§‹æŒ‡å—
- âš™ï¸ é…ç½®é€‰é¡¹è¯´æ˜
- ğŸ”§ é«˜çº§ç”¨æ³•ç¤ºä¾‹
- ğŸ› æ•…éšœæ’é™¤æŒ‡å—
- ğŸ“ API æ–‡æ¡£
- ğŸ” å®‰å…¨æ³¨æ„äº‹é¡¹

### 5. æµ‹è¯•

#### åˆ›å»ºçš„æ–‡ä»¶:
- `backend/src/__tests__/embed.test.ts` - åµŒå…¥ API çš„å•å…ƒæµ‹è¯•

#### æµ‹è¯•è¦†ç›–:
- âœ… è·å–æ™ºèƒ½ä½“é…ç½®
- âœ… åˆ›å»ºå¯¹è¯
- âœ… å‘é€æ¶ˆæ¯
- âœ… è·å–æ¶ˆæ¯å†å²
- âœ… é”™è¯¯å¤„ç†

### 6. æ•°æ®åº“æ›´æ–°

#### ä¿®æ”¹çš„æ–‡ä»¶:
- `backend/prisma/schema.prisma` - æ·»åŠ äº† `shareToken` å­—æ®µåˆ° Agent æ¨¡å‹

#### å­—æ®µè¯´æ˜:
- `shareToken` - å”¯ä¸€çš„åˆ†äº«ä»¤ç‰Œ,ç”¨äºå…¬å¼€è®¿é—®æ™ºèƒ½ä½“
- `isPublic` - æ§åˆ¶æ™ºèƒ½ä½“æ˜¯å¦å¯è¢«åµŒå…¥

## ğŸ“ æ–‡ä»¶ç»“æ„

```
coze-clone/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â”œâ”€â”€ embed.js                    # JavaScript Embed SDK
â”‚   â”‚   â””â”€â”€ embed-example.html          # åµŒå…¥ç¤ºä¾‹é¡µé¢
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”œâ”€â”€ embed.ts                # åµŒå…¥ API è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ agents.ts               # æ™ºèƒ½ä½“ API (æ›´æ–°)
â”‚   â”‚   â”‚   â””â”€â”€ index.ts                # API è·¯ç”±æ³¨å†Œ (æ›´æ–°)
â”‚   â”‚   â””â”€â”€ __tests__/
â”‚   â”‚       â””â”€â”€ embed.test.ts           # åµŒå…¥ API æµ‹è¯•
â”‚   â””â”€â”€ prisma/
â”‚       â””â”€â”€ schema.prisma               # æ•°æ®åº“æ¨¡å‹ (æ›´æ–°)
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app/dashboard/agents/[id]/
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx                # æ™ºèƒ½ä½“è¯¦æƒ…é¡µ (æ›´æ–°)
â”‚   â”‚   â”œâ”€â”€ components/agents/
â”‚   â”‚   â”‚   â””â”€â”€ EmbedCode.tsx           # åµŒå…¥ä»£ç ç»„ä»¶
â”‚   â”‚   â””â”€â”€ lib/api/
â”‚   â”‚       â””â”€â”€ agents.ts               # æ™ºèƒ½ä½“ API å®¢æˆ·ç«¯ (æ›´æ–°)
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ ci-cd.yml                   # CI/CD é…ç½® (ä¿®å¤)
â”œâ”€â”€ EMBED_GUIDE.md                      # ä½¿ç”¨æŒ‡å—
â”œâ”€â”€ CHANGELOG.md                        # æ›´æ–°æ—¥å¿—
â””â”€â”€ EMBED_IMPLEMENTATION_SUMMARY.md     # æœ¬æ–‡æ¡£
```

## ğŸš€ ä½¿ç”¨æµç¨‹

### å¯¹äºç½‘ç«™ç®¡ç†å‘˜:

1. **ç”Ÿæˆåˆ†äº«ä»¤ç‰Œ**
   - åœ¨ AgentHub å¹³å°ç™»å½•
   - è¿›å…¥æ™ºèƒ½ä½“è¯¦æƒ…é¡µé¢
   - ç‚¹å‡»"Generate Share Token"
   - å¤åˆ¶ç”Ÿæˆçš„åˆ†äº«ä»¤ç‰Œ

2. **é…ç½®åµŒå…¥é€‰é¡¹**
   - é€‰æ‹©èŠå¤©çª—å£ä½ç½®
   - é€‰æ‹©ä¸»é¢˜(äº®è‰²/æš—è‰²)
   - è‡ªå®šä¹‰å°ºå¯¸ã€é¢œè‰²ã€æ ‡é¢˜
   - è®¾ç½®æ¬¢è¿æ¶ˆæ¯

3. **å¤åˆ¶åµŒå…¥ä»£ç **
   - ç‚¹å‡»"Copy Code"æŒ‰é’®
   - ç²˜è´´åˆ°ç½‘ç«™ HTML ä¸­

4. **éƒ¨ç½²**
   - ç¡®ä¿ `embed.js` å¯è®¿é—®
   - æ›´æ–° API åŸºç¡€ URL
   - æµ‹è¯•èŠå¤©åŠŸèƒ½

### å¯¹äºå¼€å‘è€…:

1. **å®‰è£…ä¾èµ–**
   ```bash
   cd backend
   npm install
   ```

2. **è¿è¡Œæ•°æ®åº“è¿ç§»**
   ```bash
   npx prisma migrate deploy
   ```

3. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
   ```bash
   npm run dev
   ```

4. **è®¿é—®ç¤ºä¾‹é¡µé¢**
   - æ‰“å¼€ `backend/public/embed-example.html`
   - æŸ¥çœ‹åµŒå…¥æ•ˆæœ

## âš™ï¸ é…ç½®é€‰é¡¹

### AgentHub.init() å‚æ•°

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| shareToken | string | å¿…å¡« | æ™ºèƒ½ä½“çš„åˆ†äº«ä»¤ç‰Œ |
| apiBaseUrl | string | 'https://your-domain.com/api/v1/embed' | API åŸºç¡€ URL |
| position | string | 'bottom-right' | èŠå¤©çª—å£ä½ç½® |
| theme | string | 'light' | ä¸»é¢˜ |
| width | number | 400 | å®½åº¦(åƒç´ ) |
| height | number | 600 | é«˜åº¦(åƒç´ ) |
| title | string | 'AI Assistant' | æ ‡é¢˜ |
| welcomeMessage | string | 'Hello! How can I help you today?' | æ¬¢è¿æ¶ˆæ¯ |
| avatarUrl | string | null | å¤´åƒ URL |
| primaryColor | string | '#3b82f6' | ä¸»è‰²è°ƒ |
| autoOpen | boolean | false | è‡ªåŠ¨æ‰“å¼€ |
| showHeader | boolean | true | æ˜¾ç¤ºå¤´éƒ¨ |
| showFooter | boolean | true | æ˜¾ç¤ºåº•éƒ¨ |
| allowAttachments | boolean | false | å…è®¸é™„ä»¶ |
| maxMessageHistory | number | 50 | æœ€å¤§æ¶ˆæ¯å†å² |

## ğŸ”’ å®‰å…¨ç‰¹æ€§

1. **åˆ†äº«ä»¤ç‰Œæœºåˆ¶**
   - æ¯ä¸ªæ™ºèƒ½ä½“æœ‰å”¯ä¸€çš„åˆ†äº«ä»¤ç‰Œ
   - åªæœ‰å…¬å¼€çš„æ™ºèƒ½ä½“æ‰èƒ½è¢«åµŒå…¥
   - æ”¯æŒæ’¤é”€åˆ†äº«ä»¤ç‰Œ

2. **è®¿é—®æ§åˆ¶**
   - éªŒè¯æ™ºèƒ½ä½“æ˜¯å¦å…¬å¼€
   - éªŒè¯åˆ†äº«ä»¤ç‰Œæœ‰æ•ˆæ€§
   - ä¼šè¯éš”ç¦»

3. **æ•°æ®ä¿æŠ¤**
   - è®¿é—®è€…ä¿¡æ¯æ”¶é›†
   - æ¶ˆæ¯å†å²ç®¡ç†
   - éšç§ä¿æŠ¤

## ğŸ“Š æŠ€æœ¯æ ˆ

- **åç«¯**: Node.js, Express, TypeScript, Prisma
- **å‰ç«¯**: React, Next.js, TypeScript
- **æ•°æ®åº“**: PostgreSQL
- **SDK**: åŸç”Ÿ JavaScript (æ— ä¾èµ–)
- **æµ‹è¯•**: Jest, Supertest

## ğŸ¨ UI/UX ç‰¹æ€§

1. **å“åº”å¼è®¾è®¡**
   - é€‚é…å„ç§å±å¹•å°ºå¯¸
   - ç§»åŠ¨ç«¯å‹å¥½

2. **ä¸»é¢˜æ”¯æŒ**
   - äº®è‰²ä¸»é¢˜
   - æš—è‰²ä¸»é¢˜
   - è‡ªå®šä¹‰é¢œè‰²

3. **åŠ¨ç”»æ•ˆæœ**
   - å¹³æ»‘çš„æ‰“å¼€/å…³é—­åŠ¨ç”»
   - æ¶ˆæ¯æ·¡å…¥æ•ˆæœ
   - æŒ‰é’®æ‚¬åœæ•ˆæœ

4. **å¯è®¿é—®æ€§**
   - é”®ç›˜å¯¼èˆªæ”¯æŒ
   - æ¸…æ™°çš„è§†è§‰åé¦ˆ
   - è¯­ä¹‰åŒ– HTML

## ğŸ”„ å·¥ä½œæµç¨‹

```
ç”¨æˆ·è®¿é—®ç½‘ç«™
    â†“
åŠ è½½ embed.js
    â†“
æ˜¾ç¤ºèŠå¤©æŒ‰é’®
    â†“
ç”¨æˆ·ç‚¹å‡»æŒ‰é’®
    â†“
æ‰“å¼€èŠå¤©çª—å£
    â†“
åŠ è½½æ™ºèƒ½ä½“é…ç½®
    â†“
åˆ›å»ºä¼šè¯
    â†“
ç”¨æˆ·å‘é€æ¶ˆæ¯
    â†“
API å¤„ç†æ¶ˆæ¯
    â†“
è¿”å› AI å“åº”
    â†“
æ˜¾ç¤ºå“åº”æ¶ˆæ¯
```

## ğŸ“ å¾…åŠäº‹é¡¹

### é«˜ä¼˜å…ˆçº§:
- [ ] å®ç° LLM é›†æˆ(æ›¿æ¢å ä½ç¬¦å“åº”)
- [ ] æ·»åŠ æ¶ˆæ¯å†å²æŒä¹…åŒ–
- [ ] å®ç°é€Ÿç‡é™åˆ¶
- [ ] ä¼˜åŒ–é”™è¯¯å¤„ç†

### ä¸­ä¼˜å…ˆçº§:
- [ ] æ·»åŠ æ–‡ä»¶é™„ä»¶åŠŸèƒ½
- [ ] å®ç°å®æ—¶é€šçŸ¥
- [ ] æ·»åŠ ä½¿ç”¨åˆ†æç»Ÿè®¡
- [ ] å®ç°å¤šè¯­è¨€æ”¯æŒ

### ä½ä¼˜å…ˆçº§:
- [ ] æ·»åŠ æ›´å¤šä¸»é¢˜é€‰é¡¹
- [ ] å®ç°ç¦»çº¿æ¶ˆæ¯é˜Ÿåˆ—
- [ ] æ·»åŠ è¯­éŸ³è¾“å…¥æ”¯æŒ
- [ ] ä¼˜åŒ–ç§»åŠ¨ç«¯ä½“éªŒ

## ğŸ› å·²çŸ¥é—®é¢˜

1. LLM é›†æˆå°šæœªå®ç°,ç›®å‰ä½¿ç”¨å ä½ç¬¦å“åº”
2. æ¶ˆæ¯å†å²å¯èƒ½éœ€è¦ä¼˜åŒ–æ€§èƒ½
3. éœ€è¦æ·»åŠ æ›´å¤šçš„å•å…ƒæµ‹è¯•

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®,è¯·è”ç³»:
- Email: support@agenthub.com
- GitHub: https://github.com/your-org/agenthub
- æ–‡æ¡£: https://docs.agenthub.com

## ğŸ“„ è®¸å¯è¯

MIT License

---

**å®ç°æ—¥æœŸ**: 2025-01-19
**ç‰ˆæœ¬**: 1.0.0
**çŠ¶æ€**: âœ… å®Œæˆ
